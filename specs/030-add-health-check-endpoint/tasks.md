# Tasks: Health Check Facet

**Branch**: `030-add-health-check-endpoint` | **Plan**: [plan.md](./plan.md)

## Task List

### Phase 1: Core Facet Definition

- [ ] **T1**: Define HealthCheck facet interface
  - **File**: `packages/latency/src/facets/health-check.ts`
  - **Description**: Create the `HealthCheck` interface with `getHealth()` and `registerContributor()` methods. Define `HealthStatus`, `HealthCheckResult`, and `HealthContributor` types.
  - **Depends on**: None
  - **Parallel**: Yes (with T2)

- [ ] **T2**: Export facet from barrel file
  - **File**: `packages/latency/src/facets/index.ts`
  - **Description**: Add `health-check` exports to the facets barrel file.
  - **Depends on**: T1

### Phase 2: Plugin Package Scaffold

- [ ] **T3**: Create plugin package structure
  - **Files**: `packages/latency-plugin-health-check/package.json`, `tsconfig.json`, `vitest.config.ts`, `src/index.ts`
  - **Description**: Scaffold the new plugin package with dependencies on `@generacy-ai/latency`. Follow patterns from `latency-plugin-git`.
  - **Depends on**: None
  - **Parallel**: Yes (with T1)

### Phase 3: Implementation

- [ ] **T4**: Implement HealthCheckPlugin
  - **File**: `packages/latency-plugin-health-check/src/plugin.ts`
  - **Description**: Implement the plugin class with contributor registration, timeout handling, status aggregation, and the `activate()` function.
  - **Depends on**: T1, T3

### Phase 4: Testing

- [ ] **T5**: Write unit tests
  - **File**: `packages/latency-plugin-health-check/__tests__/plugin.test.ts`
  - **Description**: Test health check with no contributors, healthy/unhealthy contributors, worst-status-wins aggregation, timeout handling, and version/uptime population.
  - **Depends on**: T4

### Phase 5: Integration

- [ ] **T6**: Register package in workspace and verify build
  - **Description**: Run `pnpm install`, `pnpm build`, and `pnpm test` to verify everything compiles and passes.
  - **Depends on**: T1-T5

---

*Generated by speckit*
