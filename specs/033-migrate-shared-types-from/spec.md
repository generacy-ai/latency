# Feature Specification: ## Migrate shared types from contracts repo

The `@generacy-ai/contracts` repo contains shared type definitions, schemas, and cross-component communication types

**Branch**: `033-migrate-shared-types-from` | **Date**: 2026-02-25 | **Status**: Draft

## Summary

## Migrate shared types from contracts repo

The `@generacy-ai/contracts` repo contains shared type definitions, schemas, and cross-component communication types. Latency is the shared foundation layer, so cross-component and common types belong here.

### Background
- Contracts repo has ~1,152 exports across 209 TS files
- No active repo currently depends on `@generacy-ai/contracts` (humancy had a `file:` dep but is deferred)
- This is a "move types to their proper home" migration, not a live dependency swap

### Types to migrate into latency

**1. `src/common/`** — Shared foundation types
- `capability.ts`, `config.ts`, `errors.ts`, `ids.ts`, `message-envelope.ts`, `pagination.ts`, `timestamps.ts`, `urgency.ts`, `version.ts`, `extended-meta.ts`
- These are the core domain models used across all components

**2. `src/orchestration/`** — Orchestration types
- `agent-info.ts`, `events.ts`, `status.ts`, `work-item.ts`
- Latency already owns orchestration abstractions

**3. `src/agency-generacy/`** — Agency-Generacy communication types
- `capability-declaration.ts`, `channel-registration.ts`, `mode-setting.ts`, `protocol-handshake.ts`, `tool-catalog.ts`
- Cross-component contracts belong in the shared foundation

**4. `src/agency-humancy/`** — Agency-Humancy communication types
- `decision-request.ts`, `decision-response.ts`, `mode-management.ts`, `tool-invocation.ts`, `tool-registration.ts`, `tool-result.ts`

**5. `src/generacy-humancy/`** — Generacy-Humancy communication types
- `decision-option.ts`, `decision-queue-item.ts`, `integration-status.ts`, `notification.ts`, `queue-status.ts`, `workflow-event.ts`

**6. `src/telemetry/`** — Telemetry types
- `anonymous-tool-metric.ts`, `error-category.ts`, `time-window.ts`, `tool-call-event.ts`, `tool-stats.ts`

**7. `src/version-compatibility/`** — Version compatibility types

### Approach
- Organize by domain following latency's existing conventions (not mirroring contracts structure)
- Migrate Zod schemas and runtime validation alongside types
- Migrate tests alongside their types (adapt to latency's vitest conventions)
- Include any schema generation scripts relevant to migrated types

### Acceptance criteria
- All common, orchestration, cross-component communication, and telemetry types from contracts are in latency
- Tests pass for migrated types
- Types are exported and usable by downstream consumers

### Context
Replaces cross-repo issue generacy-ai/generacy#246. Agency has a separate issue for tool schemas migration.

## User Stories

### US1: [Primary User Story]

**As a** [user type],
**I want** [capability],
**So that** [benefit].

**Acceptance Criteria**:
- [ ] [Criterion 1]
- [ ] [Criterion 2]

## Functional Requirements

| ID | Requirement | Priority | Notes |
|----|-------------|----------|-------|
| FR-001 | [Description] | P1 | |

## Success Criteria

| ID | Metric | Target | Measurement |
|----|--------|--------|-------------|
| SC-001 | [Metric] | [Target] | [How to measure] |

## Assumptions

- [Assumption 1]

## Out of Scope

- [Exclusion 1]

---

*Generated by speckit*
