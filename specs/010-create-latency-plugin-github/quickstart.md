# Quickstart: GitHub Issues Plugin

## Installation

```bash
# For plugin users (need API access)
pnpm add @generacy-ai/latency-plugin-github-issues

# For type consumers only (no @octokit/rest)
pnpm add @generacy-ai/github-issues-interface
```

## Usage

### Basic Plugin Usage

```typescript
import { GitHubIssuesPlugin } from '@generacy-ai/latency-plugin-github-issues';

const plugin = new GitHubIssuesPlugin({
  token: process.env.GITHUB_TOKEN!,
  owner: 'my-org',
  repo: 'my-repo',
});

// Create an issue
const issue = await plugin.createIssue({
  title: 'Bug: Login fails on mobile',
  body: 'Steps to reproduce...',
  labels: ['bug', 'mobile'],
});

// Get an issue by number
const fetched = await plugin.getIssue('42');

// Update an issue
await plugin.updateIssue('42', {
  state: 'closed',
  labels: ['bug', 'mobile', 'resolved'],
});

// List issues
const result = await plugin.listIssues({
  state: 'open',
  labels: ['bug'],
  limit: 10,
});

// Add a comment
await plugin.addComment('42', 'Fixed in PR #55');
```

### GitHub-Specific Methods

```typescript
// Link a PR to an issue (adds cross-reference comment)
await plugin.linkPullRequest('42', 55);

// Add labels
const updated = await plugin.addLabels('42', ['priority:high']);
```

### Type Guards & Helpers

```typescript
import {
  isGitHubIssue,
  getGitHubIssueUrl,
  parseGitHubIssueRef,
} from '@generacy-ai/github-issues-interface';
import type { GitHubIssue } from '@generacy-ai/github-issues-interface';

// Type guard
const issue = await plugin.getIssue('42');
if (isGitHubIssue(issue)) {
  console.log(issue.number);     // 42
  console.log(issue.repository); // "my-org/my-repo"
  console.log(issue.htmlUrl);    // "https://github.com/my-org/my-repo/issues/42"
}

// Parse refs
const ref = parseGitHubIssueRef('my-org/my-repo#42');
// { owner: 'my-org', repo: 'my-repo', number: 42 }

// Get URL
const url = getGitHubIssueUrl(issue as GitHubIssue);
```

### Error Handling

```typescript
import { FacetError } from '@generacy-ai/latency';

try {
  await plugin.getIssue('99999');
} catch (error) {
  if (error instanceof FacetError) {
    switch (error.code) {
      case 'NOT_FOUND':
        console.log('Issue does not exist');
        break;
      case 'AUTH_ERROR':
        console.log('Token invalid or insufficient permissions');
        break;
      case 'RATE_LIMIT':
        console.log('GitHub API rate limit exceeded');
        break;
    }
  }
}
```

## Build

```bash
# From repo root
pnpm install
pnpm build
pnpm test
```

---

*Generated by speckit*
