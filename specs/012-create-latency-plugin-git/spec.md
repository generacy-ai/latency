# Feature Specification: Create latency-plugin-git + interface

**Branch**: `012-create-latency-plugin-git` | **Date**: 2026-02-03 | **Status**: Draft

## Summary

## Parent Epic
Part of #1 (Phase 1 - Repository & Package Setup) - Phase 1C

## Description

Create the Git CLI implementation with two packages:
1. **latency-plugin-git** - The implementation (wraps git CLI)
2. **git-interface** - Types for consumers

## Plugin Package

```typescript
// @generacy-ai/latency-plugin-git

import { AbstractSourceControlPlugin } from '@generacy-ai/latency-plugin-source-control';
import { GitCommit, GitBranch, GitStatus } from '@generacy-ai/git-interface';
import simpleGit, { SimpleGit } from 'simple-git';

export class GitPlugin extends AbstractSourceControlPlugin {
  private git: SimpleGit;

  constructor(options: GitConfig) {
    super({ workingDirectory: options.workingDirectory });
    this.git = simpleGit(options.workingDirectory);
  }

  protected async doCommit(message: string, files: string[]): Promise<GitCommit> {
    await this.git.add(files);
    const result = await this.git.commit(message);
    return this.mapToGitCommit(result);
  }

  // Git-specific methods
  async stash(message?: string): Promise<void>;
  async stashPop(): Promise<void>;
  async rebase(branch: string): Promise<void>;
  async cherryPick(commitSha: string): Promise<void>;
  async blame(file: string): Promise<GitBlame[]>;
}
```

## Interface Package

```typescript
// @generacy-ai/git-interface

import { Commit, Branch, FileChange } from '@generacy-ai/latency';

export interface GitCommit extends Commit {
  sha: string;
  shortSha: string;
  tree: string;
  parents: string[];
}

export interface GitBranch extends Branch {
  tracking?: string;
  ahead: number;
  behind: number;
}

export interface GitBlame {
  sha: string;
  author: string;
  date: Date;
  line: number;
  content: string;
}

export function isGitCommit(commit: Commit): commit is GitCommit;
export function formatCommitMessage(commit: GitCommit): string;
```

## Tasks

- [ ] Create both package directory structures
- [ ] Implement GitPlugin using simple-git
- [ ] Define Git-specific types in interface package
- [ ] Implement type guards and helpers
- [ ] Write tests with git test fixtures

## Dependencies

### Plugin
- `@generacy-ai/latency-plugin-source-control`
- `@generacy-ai/git-interface`
- `simple-git`

### Interface
- `@generacy-ai/latency` (types only)

## User Stories

### US1: [Primary User Story]

**As a** [user type],
**I want** [capability],
**So that** [benefit].

**Acceptance Criteria**:
- [ ] [Criterion 1]
- [ ] [Criterion 2]

## Functional Requirements

| ID | Requirement | Priority | Notes |
|----|-------------|----------|-------|
| FR-001 | [Description] | P1 | |

## Success Criteria

| ID | Metric | Target | Measurement |
|----|--------|--------|-------------|
| SC-001 | [Metric] | [Target] | [How to measure] |

## Assumptions

- [Assumption 1]

## Out of Scope

- [Exclusion 1]

---

*Generated by speckit*
