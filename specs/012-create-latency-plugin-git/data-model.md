# Data Model: latency-plugin-git + git-interface

## Core Entity Extensions

### GitCommit (extends Commit)

| Field | Type | Source | Description |
|-------|------|--------|-------------|
| `sha` | `string` | inherited | Full commit SHA (from core Commit) |
| `message` | `string` | inherited | Commit message (from core Commit) |
| `author` | `string` | inherited | Author name (from core Commit) |
| `date` | `Date` | inherited | Authored date (from core Commit) |
| `shortSha` | `string` | new | First 7 characters of SHA |
| `tree` | `string` | new | Tree object SHA |
| `parents` | `string[]` | new | Parent commit SHAs |

### GitBranch (extends Branch)

| Field | Type | Source | Description |
|-------|------|--------|-------------|
| `name` | `string` | inherited | Branch name (from core Branch) |
| `head` | `string` | inherited | HEAD commit SHA (from core Branch) |
| `isDefault` | `boolean` | inherited | Whether default branch (from core Branch) |
| `createdAt` | `Date` | inherited | Creation date (from core Branch) |
| `tracking` | `string?` | new | Remote tracking branch name |
| `ahead` | `number` | new | Commits ahead of tracking branch |
| `behind` | `number` | new | Commits behind tracking branch |

### GitBlame (standalone)

| Field | Type | Description |
|-------|------|-------------|
| `sha` | `string` | Blame commit SHA |
| `author` | `string` | Author of the blamed line |
| `date` | `Date` | Date of the blamed commit |
| `line` | `number` | Line number (1-based) |
| `content` | `string` | Line content |

Note: `GitBlame` is defined in the interface package for future use but not consumed by the initial plugin implementation.

### GitConfig (plugin configuration)

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `workingDirectory` | `string` | required | Path to the git repository |
| `defaultRemote` | `string?` | `"origin"` | Default remote for push/pull |

## Type Guards

| Guard | Input | Checks |
|-------|-------|--------|
| `isGitCommit(commit)` | `Commit` | `'shortSha' in commit && 'tree' in commit` |
| `isGitBranch(branch)` | `Branch` | `'ahead' in branch && 'behind' in branch` |

## simple-git Type Mappings

| simple-git Type | Maps To | Mapper Function |
|-----------------|---------|-----------------|
| `DefaultLogFields` | `GitCommit` | `mapLogToGitCommit` |
| `BranchSummaryBranch` | `GitBranch` | `mapBranchSummaryToGitBranch` |
| `StatusResult` | `DiffEntry[]` | `mapStatusToDiffEntries` |
| `DiffResultTextFile` | `DiffEntry` | `mapDiffResultToDiffEntries` |

## Error Code Mappings

| Git Error Pattern | FacetError Code |
|-------------------|-----------------|
| "not a git repository" | `NOT_FOUND` |
| "pathspec did not match" | `NOT_FOUND` |
| "Permission denied" | `AUTH_ERROR` |
| "conflict" / "CONFLICT" | `CONFLICT` |
| Other | `UNKNOWN` |

---

*Generated by speckit*
