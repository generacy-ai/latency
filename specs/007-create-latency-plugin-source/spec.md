# Feature Specification: Create latency-plugin-source-control (abstract)

**Branch**: `007-create-latency-plugin-source` | **Date**: 2026-02-03 | **Status**: Draft

## Summary

## Parent Epic
Part of #1 (Phase 1 - Repository & Package Setup) - Phase 1B

## Description

Create the abstract source control plugin that provides common logic for all version control implementations.

## Implementation

```typescript
// @generacy-ai/latency-plugin-source-control

import { SourceControl, Commit, Branch, FileChange } from '@generacy-ai/latency';

export abstract class AbstractSourceControlPlugin implements SourceControl {
  protected workingDirectory: string;

  constructor(options: { workingDirectory: string }) {
    this.workingDirectory = options.workingDirectory;
  }

  // Common validation
  async commit(message: string, files: string[]): Promise<Commit> {
    if (!message?.trim()) {
      throw new ValidationError('Commit message is required');
    }
    if (!files?.length) {
      throw new ValidationError('At least one file must be staged');
    }
    return this.doCommit(message, files);
  }

  // Abstract methods for subclasses
  protected abstract doCommit(message: string, files: string[]): Promise<Commit>;
  protected abstract doPush(remote?: string, branch?: string): Promise<void>;
  protected abstract doPull(remote?: string, branch?: string): Promise<void>;
  protected abstract doGetBranch(): Promise<string>;
  protected abstract doCreateBranch(name: string): Promise<void>;
  protected abstract doCheckout(ref: string): Promise<void>;
  protected abstract doGetStatus(): Promise<FileChange[]>;
  protected abstract doGetDiff(ref?: string): Promise<string>;
}
```

## Tasks

- [ ] Create package directory structure
- [ ] Implement `AbstractSourceControlPlugin` class
- [ ] Implement common validation and error handling
- [ ] Add comprehensive JSDoc documentation
- [ ] Write unit tests
- [ ] Export all types from package root

## Acceptance Criteria

- [ ] Abstract class provides common validation
- [ ] Subclasses implement service-specific methods
- [ ] Clear error messages for invalid operations

## Dependencies

- `@generacy-ai/latency` (for facet types)

## User Stories

### US1: [Primary User Story]

**As a** [user type],
**I want** [capability],
**So that** [benefit].

**Acceptance Criteria**:
- [ ] [Criterion 1]
- [ ] [Criterion 2]

## Functional Requirements

| ID | Requirement | Priority | Notes |
|----|-------------|----------|-------|
| FR-001 | [Description] | P1 | |

## Success Criteria

| ID | Metric | Target | Measurement |
|----|--------|--------|-------------|
| SC-001 | [Metric] | [Target] | [How to measure] |

## Assumptions

- [Assumption 1]

## Out of Scope

- [Exclusion 1]

---

*Generated by speckit*
