# Feature Specification: Define core facet interfaces

**Branch**: `003-define-core-facet-interfaces` | **Date**: 2026-02-03 | **Status**: Draft

## Summary

## Parent Epic
Part of #1 (Phase 1 - Repository & Package Setup)

## Description

Create the initial set of core facets in `@generacy-ai/latency`. These are abstract capability interfaces that components provide and consume without knowing each other.

## Tasks

- [ ] Create `src/facets/issue-tracker.ts` - IssueTracker interface
- [ ] Create `src/facets/source-control.ts` - SourceControl interface
- [ ] Create `src/facets/decision.ts` - DecisionHandler interface
- [ ] Create `src/facets/workflow.ts` - WorkflowEngine interface
- [ ] Create `src/facets/logging.ts` - Logger interface
- [ ] Create `src/facets/state.ts` - StateStore interface
- [ ] Create `src/facets/events.ts` - EventBus interface
- [ ] Create `src/facets/secrets.ts` - SecretStore interface
- [ ] Create `src/facets/index.ts` - re-exports all facets

## Example Interface

```typescript
// src/facets/issue-tracker.ts

/**
 * Abstract interface for issue/ticket tracking systems.
 * Implementations: GitHub Issues, Jira, Linear, etc.
 */
export interface IssueTracker {
  /** Create a new issue */
  createIssue(spec: IssueSpec): Promise<Issue>;
  
  /** Get an issue by ID */
  getIssue(id: string): Promise<Issue>;
  
  /** Update an existing issue */
  updateIssue(id: string, update: IssueUpdate): Promise<Issue>;
  
  /** List issues matching a query */
  listIssues(query: IssueQuery): Promise<Issue[]>;
  
  /** Add a comment to an issue */
  addComment(issueId: string, comment: string): Promise<Comment>;
}

export interface Issue {
  id: string;
  title: string;
  body: string;
  state: 'open' | 'closed';
  labels: string[];
  assignees: string[];
  createdAt: Date;
  updatedAt: Date;
}

export interface IssueSpec {
  title: string;
  body?: string;
  labels?: string[];
  assignees?: string[];
}

export interface IssueUpdate {
  title?: string;
  body?: string;
  state?: 'open' | 'closed';
  labels?: string[];
  assignees?: string[];
}

export interface IssueQuery {
  state?: 'open' | 'closed' | 'all';
  labels?: string[];
  assignee?: string;
  limit?: number;
  offset?: number;
}

export interface Comment {
  id: string;
  body: string;
  author: string;
  createdAt: Date;
}
```

## File Structure

```
packages/latency/src/
├── facets/
│   ├── issue-tracker.ts      # IssueTracker, Issue, IssueSpec, etc.
│   ├── source-control.ts     # SourceControl, Commit, Branch, etc.
│   ├── decision.ts           # DecisionHandler, Decision, DecisionResult
│   ├── workflow.ts           # WorkflowEngine, Workflow, WorkflowStep
│   ├── logging.ts            # Logger, LogLevel
│   ├── state.ts              # StateStore
│   ├── events.ts             # EventBus, Unsubscribe
│   ├── secrets.ts            # SecretStore
│   └── index.ts              # Re-exports all facets
└── index.ts                  # Package entry point
```

## Acceptance Criteria

- [ ] All 8 facet interfaces are defined with full JSDoc documentation
- [ ] Interfaces are minimal but complete (can be extended additively)
- [ ] All interfaces exported from package root
- [ ] No dependencies on Agency, Humancy, or Generacy
- [ ] Types compile without errors

## Design Principles

1. **Abstract over concrete** - Define capabilities, not implementations
2. **Minimal but complete** - Include essential operations only
3. **Async-first** - All operations return Promises
4. **Extensible** - Allow implementations to add optional features
5. **Documented** - Full JSDoc with examples

## References

- [latency-integration-plan.md - Issue 1.2](/workspaces/tetrad-development/docs/latency-integration-plan.md)
- [latency-architecture.md - Core Facets](/workspaces/tetrad-development/docs/latency-architecture.md)

## User Stories

### US1: [Primary User Story]

**As a** [user type],
**I want** [capability],
**So that** [benefit].

**Acceptance Criteria**:
- [ ] [Criterion 1]
- [ ] [Criterion 2]

## Functional Requirements

| ID | Requirement | Priority | Notes |
|----|-------------|----------|-------|
| FR-001 | [Description] | P1 | |

## Success Criteria

| ID | Metric | Target | Measurement |
|----|--------|--------|-------------|
| SC-001 | [Metric] | [Target] | [How to measure] |

## Assumptions

- [Assumption 1]

## Out of Scope

- [Exclusion 1]

---

*Generated by speckit*
