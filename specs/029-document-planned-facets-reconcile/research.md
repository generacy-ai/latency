# Research: Document planned facets and reconcile dual StateStore

## Technology Decisions

### 1. Documentation Approach: JSDoc `@remarks` + README

**Decision**: Use JSDoc `@remarks` tags on each planned facet interface, plus a centralized README in the facets directory.

**Rationale**:
- **JSDoc `@remarks`**: Provides inline discoverability in IDEs. Developers hovering over or importing `EventBus` will see the adoption status immediately.
- **Centralized README**: Gives a single-page overview for developers exploring the codebase. Useful for onboarding and architectural understanding.
- **Why not `@planned` tag**: No such standard JSDoc tag exists. Custom tags have poor tooling support.
- **Why not move to `planned/` subdirectory**: Would break existing import paths and re-exports. The interfaces are stable — only consumer adoption is pending.

**Alternatives Considered**:
- `@planned` tag (rejected: non-standard)
- `planned/` subdirectory (rejected: breaking change)
- Only README (rejected: less discoverable)
- Only JSDoc (rejected: lacks overview)

### 2. StateStore Naming: `PluginStateStore`

**Decision**: Rename the sync StateStore in `composition/context.ts` to `PluginStateStore`.

**Rationale**:
- **"Plugin" prefix**: Matches existing naming convention (`PluginContext`, `PluginManifest`)
- **Clear scope**: Indicates this is plugin-scoped state, not persistent storage
- **No confusion**: Unambiguous distinction from the facet `StateStore`

**Alternatives Considered**:
- `ContextState` (rejected: less clear about purpose)
- `SyncStateStore` (rejected: focuses on implementation detail, not use case)
- `LocalStateStore` (rejected: "local" is ambiguous)

### 3. LogLevel Retention

**Decision**: Keep the `LogLevel` type in `facets/logging.ts`.

**Rationale**:
- Part of the public API (exported via `facets/index.ts` → main `index.ts`)
- Useful for consumers implementing custom loggers or configuring log filtering
- Documented in the module JSDoc
- No naming conflicts or issues

## Implementation Patterns

### JSDoc @remarks Format

```typescript
/**
 * Existing interface description...
 *
 * @remarks
 * **Adoption Status**: This interface is defined and stable, but currently awaiting
 * consumer adoption in Phase 3. Implementations will be provided by:
 * - [Specific provider if known]
 *
 * See `facets/README.md` for the full facet maturity matrix.
 */
export interface FacetName {
  // ...
}
```

### README Maturity Matrix Format

```markdown
| Facet | Status | Provider | Phase |
|-------|--------|----------|-------|
| IssueTracker | Active | latency-plugin-github-issues, latency-plugin-jira | 1 |
| StateStore | Awaiting Adoption | TBD | 3 |
```

### Rename Pattern

Safe rename approach:
1. Rename interface in definition file
2. Update all re-exports in the chain
3. Build to catch any missed references

## Key Sources

- Architecture documentation: Facet categories and Phase 3 roadmap
- Existing codebase: `packages/latency/src/facets/` and `packages/latency/src/composition/`
- TypeScript handbook: JSDoc reference tags

---

*Generated by speckit*
