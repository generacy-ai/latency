# Feature Specification: Create latency-plugin-github-actions + interface

**Branch**: `014-create-latency-plugin-github` | **Date**: 2026-02-03 | **Status**: Draft

## Summary

## Parent Epic
Part of #1 (Phase 1 - Repository & Package Setup) - Phase 1C

## Description

Create the GitHub Actions implementation with two packages:
1. **latency-plugin-github-actions** - The implementation
2. **github-actions-interface** - Types for consumers

## Plugin Package

```typescript
// @generacy-ai/latency-plugin-github-actions

import { AbstractCICDPlugin } from '@generacy-ai/latency-plugin-ci-cd';
import { GitHubWorkflow, GitHubWorkflowRun } from '@generacy-ai/github-actions-interface';
import { Octokit } from '@octokit/rest';

export class GitHubActionsPlugin extends AbstractCICDPlugin {
  private octokit: Octokit;
  private owner: string;
  private repo: string;

  constructor(config: GitHubActionsConfig) {
    super();
    this.octokit = new Octokit({ auth: config.token });
    this.owner = config.owner;
    this.repo = config.repo;
  }

  protected async doTrigger(workflowId: string, options?: TriggerOptions): Promise<GitHubWorkflowRun> {
    await this.octokit.actions.createWorkflowDispatch({
      owner: this.owner,
      repo: this.repo,
      workflow_id: workflowId,
      ref: options?.ref ?? 'main',
      inputs: options?.inputs
    });
    // Return the created run
  }

  // GitHub Actions-specific methods
  async getWorkflowLogs(runId: number): Promise<string>;
  async rerunWorkflow(runId: number): Promise<GitHubWorkflowRun>;
  async listArtifacts(runId: number): Promise<GitHubArtifact[]>;
  async downloadArtifact(artifactId: number): Promise<Buffer>;
}
```

## Interface Package

```typescript
// @generacy-ai/github-actions-interface

import { Pipeline, PipelineRun } from '@generacy-ai/latency';

export interface GitHubWorkflow extends Pipeline {
  path: string;             // .github/workflows/ci.yml
  state: 'active' | 'disabled_inactivity' | 'disabled_manually';
  triggers: GitHubWorkflowTrigger[];
}

export interface GitHubWorkflowRun extends PipelineRun {
  workflowId: number;
  runNumber: number;
  attempt: number;
  triggeredBy: string;
  headSha: string;
  headBranch: string;
  jobs: GitHubJob[];
}

export interface GitHubJob {
  id: number;
  name: string;
  status: 'queued' | 'in_progress' | 'completed';
  conclusion?: 'success' | 'failure' | 'cancelled' | 'skipped';
  steps: GitHubStep[];
}

export function isGitHubWorkflowRun(run: PipelineRun): run is GitHubWorkflowRun;
export function getWorkflowRunUrl(run: GitHubWorkflowRun, owner: string, repo: string): string;
```

## Tasks

- [ ] Create both package directory structures
- [ ] Implement GitHubActionsPlugin extending abstract
- [ ] Define GitHub Actions-specific types in interface package
- [ ] Implement type guards and helpers
- [ ] Write tests

## Dependencies

### Plugin
- `@generacy-ai/latency-plugin-ci-cd`
- `@generacy-ai/github-actions-interface`
- `@octokit/rest`

### Interface
- `@generacy-ai/latency` (types only)

## User Stories

### US1: [Primary User Story]

**As a** [user type],
**I want** [capability],
**So that** [benefit].

**Acceptance Criteria**:
- [ ] [Criterion 1]
- [ ] [Criterion 2]

## Functional Requirements

| ID | Requirement | Priority | Notes |
|----|-------------|----------|-------|
| FR-001 | [Description] | P1 | |

## Success Criteria

| ID | Metric | Target | Measurement |
|----|--------|--------|-------------|
| SC-001 | [Metric] | [Target] | [How to measure] |

## Assumptions

- [Assumption 1]

## Out of Scope

- [Exclusion 1]

---

*Generated by speckit*
